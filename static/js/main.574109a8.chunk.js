(this["webpackJsonprealworld-react-typescript"]=this["webpackJsonprealworld-react-typescript"]||[]).push([[0],{64:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(30),s=n.n(a),i=n(12),o=n(0),l=function(){return Object(o.jsx)("footer",{children:Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)("a",{href:"/",className:"logo-font",children:"conduit"}),Object(o.jsxs)("span",{className:"attribution",children:["An interactive learning project from"," ",Object(o.jsx)("a",{href:"https://thinkster.io",children:"Thinkster"}),". Code & design licensed under MIT."]})]})})},j=n(9),u=n(2),d=n(18),b=n.n(d),h=n(31),m=n(10),O=n(3),x=function(e,t,n){var c=Object(r.useState)(e),a=Object(j.a)(c,2),s=a[0],i=a[1],o=Object(r.useState)(n),l=Object(j.a)(o,2),u=l[0],d=l[1];return{handleSubmit:function(){var e=Object(h.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),handleChange:function(e){i(Object(O.a)(Object(O.a)({},s),{},Object(m.a)({},e.target.name,e.target.value)))},values:s,error:u,setError:d}},f=n(19),p=n.n(f);function v(){var e=window.localStorage.getItem(g);return null===e?null:JSON.parse(e)}var g="user-key";p.a.interceptors.request.use((function(e){var t=v();return t&&(e.headers.Authorization="Token ".concat(t.token)),e}));var N=p.a.create({baseURL:"https://api.realworld.io/api"});function S(e){return N.get("/articles",{params:e}).then((function(e){return e.data.articles}))}var w=n(14),C=["error","children"],y=function(e){var t=e.error,n=e.children,r=Object(w.a)(e,C);return Object(o.jsxs)("form",Object(O.a)(Object(O.a)({},r),{},{children:[t&&Object(o.jsx)(k,{message:t.message}),n]}))},k=function(e){var t=e.message;return Object(o.jsx)("ul",{className:"error-messages",children:Object(o.jsx)("li",{children:t})})},F=function(e){var t=e.children;return Object(o.jsx)("fieldset",{className:"form-group","aria-label":"form-field-set",children:t})},L=function(e){return Object(o.jsx)(F,{children:Object(o.jsx)("input",Object(O.a)({className:"form-control form-control-lg"},e))})},E=function(e){return Object(o.jsx)(F,{children:Object(o.jsx)("textarea",Object(O.a)({className:"form-control"},e))})},A=["children"],I=function(e){var t=e.children,n=Object(w.a)(e,A);return Object(o.jsx)("button",Object(O.a)(Object(O.a)({type:"submit",className:"btn btn-lg btn-primary pull-xs-right"},n),{},{children:t}))},U=function(){return Object(o.jsx)("div",{className:"editor-page",children:Object(o.jsx)("div",{className:"container page",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-10 offset-md-1 col-xs-12",children:Object(o.jsx)(T,{title:"",description:"",body:"",tagList:[]})})})})})},P="/editor",T=function(e){var t=e.title,n=e.description,r=e.body,c=e.tagList,a=x({title:t,description:n,body:r,tagList:c},(function(){(e=l,N.post("/articles",{article:e}).then((function(e){return e.data.article}))).catch((function(){return u(Error("Failed to create article"))}));var e}),void 0),s=a.handleSubmit,i=a.handleChange,l=a.values,j=a.error,u=a.setError;return Object(o.jsxs)(y,{onSubmit:s,error:j,children:[Object(o.jsx)(L,{type:"text",name:"title",placeholder:"Article Title",value:l.title,onChange:i}),Object(o.jsx)(L,{type:"text",name:"description",placeholder:"What's this article about?",value:l.description,onChange:i}),Object(o.jsx)(E,{name:"bio",rows:8,placeholder:"Write your article (in markdown)"}),Object(o.jsx)(L,{type:"text",name:"tagList",placeholder:"Enter tags",value:l.tagList,onChange:i}),Object(o.jsx)(I,{children:"Publish Article"})]})},R=function(e){var t=e.to,n=e.children;return Object(o.jsx)(J,{children:Object(o.jsx)(i.c,{className:function(e){return e?M:"".concat(M," active")},exact:!0,to:t,children:n})})},Y=function(e){var t=e.activated,n=e.onClick,r=e.children,c=t?B:M;return Object(o.jsx)(J,{children:Object(o.jsx)("button",{type:"button",className:c,onClick:n,children:r})})},J=function(e){var t=e.children;return Object(o.jsx)("li",{className:"nav-item",children:t})},M="nav-link",B="".concat(M," active"),D=function(e){var t,n=e.feeds,c=e.onClickFeed,a=Object(r.useState)(n[0]),s=Object(j.a)(a,2),i=s[0],l=s[1],u=Object(r.useState)((function(){return n.reduce((function(e,t){return Object(O.a)(Object(O.a)({},e),{},Object(m.a)({},t,[]))}),{})})),d=Object(j.a)(u,2),b=d[0],h=d[1];return Object(r.useEffect)((function(){return n.forEach((function(e){return c(e).then((function(t){return h(Object(O.a)(Object(O.a)({},b),{},Object(m.a)({},e,t)))}))})),function(){return h({})}}),[n,c]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(G,{feedActivated:i,feeds:n,onFeedClick:l}),null===(t=b[i])||void 0===t?void 0:t.map((function(e){return Object(o.jsx)(W,{article:e},"".concat(e.author," ").concat(e.title))}))]})},G=function(e){var t=e.feedActivated,n=e.feeds,r=e.onFeedClick;return Object(o.jsx)("div",{className:"feed-toggle",children:Object(o.jsx)("ul",{className:"nav nav-pills outline-active",children:n.map((function(e){return Object(o.jsx)(Y,{activated:t===e,onClick:function(){return r(e)},children:e},e)}))})})},W=function(e){var t,n=e.article,c=Object(r.useState)(n.favoritesCount),a=Object(j.a)(c,2),s=a[0],i=a[1];return Object(o.jsxs)("div",{className:"article-preview",children:[Object(o.jsxs)("div",{className:"article-meta",children:[Object(o.jsx)("a",{href:"profile.html",children:Object(o.jsx)("img",{src:null!==(t=n.author.image)&&void 0!==t?t:void 0,alt:"profile"})}),Object(o.jsxs)("div",{className:"info",children:[Object(o.jsx)("a",{href:"/",className:"author",children:n.author.username}),Object(o.jsx)("span",{className:"date",children:n.createdAt})]}),Object(o.jsxs)("button",{type:"button",className:"btn btn-outline-primary btn-sm pull-xs-right",onClick:function(){(function(e){return N.post("/articles/".concat(e.slug,"/favorite")).then((function(e){return e.data.article}))})(n).then((function(e){return i(e.favoritesCount)}))},children:[Object(o.jsx)("i",{className:"ion-heart"}),"".concat(s)]})]}),Object(o.jsxs)("a",{href:"/",className:"preview-link",children:[Object(o.jsx)("h1",{children:n.title}),Object(o.jsx)("p",{children:n.description}),Object(o.jsx)("span",{children:"Read more..."})]})]})};var q="/profile",z=function(e){var t=e.user,n=Object(r.useCallback)((function(e){return S("My Articles"===e?{author:t.username}:{favorited:t.username})}),[t]);return Object(o.jsxs)("div",{className:"profile-page",children:[Object(o.jsx)(H,{user:t}),Object(o.jsx)("div",{className:"container",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-xs-12 col-md-10 offset-md-1",children:Object(o.jsx)(D,{feeds:["My Articles","Favorited Articles"],onClickFeed:n})})})})]})},H=function(e){var t=e.user;return Object(o.jsx)("div",{className:"user-info",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-xs-12 col-md-10 offset-md-1",children:[Object(o.jsx)("img",{alt:"profile",src:t.image||"//api.realworld.io/images/demo-avatar.png",className:"user-img"}),Object(o.jsx)("h4",{children:t.username}),Object(o.jsx)("p",{children:t.bio}),Object(o.jsxs)("button",{type:"button",className:"btn btn-sm btn-outline-secondary action-btn",onClick:function(){return e=t.username,N.post("/profiles/".concat(e,"/follow")).then((function(e){return e.data.profile}));var e},children:[Object(o.jsx)("i",{className:"ion-plus-round"}),"Follow ".concat(t.username)]})]})})})})},K=function(e){var t=e.user;return Object(o.jsx)("div",{className:"settings-page",children:Object(o.jsx)("div",{className:"container page",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-md-6 offset-md-3 col-xs-12",children:[Object(o.jsx)("h1",{className:"text-xs-center",children:"Your Settings"}),Object(o.jsx)(V,{email:t.email,username:t.username,image:t.image,bio:t.bio,token:t.token})]})})})})},Q="/settings",V=function(e){var t=e.email,n=e.username,r=e.image,c=e.bio,a=x({email:t,username:n,image:r,bio:c,password:""},(function(){(e=l,N.put("/users",{user:Object(O.a)({},e)}).then((function(e){return e.data.user}))).catch((function(){return u(Error("Failed to update user"))}));var e}),void 0),s=a.handleSubmit,i=a.handleChange,l=a.values,j=a.error,u=a.setError;return Object(o.jsxs)(y,{onSubmit:s,error:j,children:[Object(o.jsx)(L,{type:"text",name:"image",value:null!==l.image?l.image:"",onChange:i,placeholder:"URL of profile picture"}),Object(o.jsx)(L,{type:"text",name:"username",value:l.username,onChange:i,placeholder:"Your Name"}),Object(o.jsx)(E,{name:"bio",value:null!==l.bio?l.bio:"",onChange:i,rows:8,placeholder:"Short bio about you"}),Object(o.jsx)(L,{type:"text",name:"email",value:l.email,onChange:i,placeholder:"Email"}),Object(o.jsx)(L,{type:"password",name:"password",value:l.password,onChange:i,placeholder:"Password"}),Object(o.jsx)(I,{children:"Update Settings"})]})};var X=function(e){var t=e.userLoggedIn;return Object(o.jsxs)("div",{className:"home-page",children:[Object(o.jsx)($,{}),Object(o.jsx)("div",{className:"container page",children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-md-9",children:t?Object(o.jsx)(D,{feeds:["Global Feed","Your Feed"],onClickFeed:Z}):Object(o.jsx)(D,{feeds:["Global Feed"],onClickFeed:Z})}),Object(o.jsx)("div",{className:"col-md-3",children:Object(o.jsx)(_,{})})]})})]})},Z=function(e){return"Your Feed"===e?N.get("/articles/feed",{params:t}).then((function(e){return e.data.articles})):S();var t},$=function(){return Object(o.jsx)("div",{className:"banner",children:Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)("h1",{className:"logo-font",children:"conduit"}),Object(o.jsx)("p",{children:"A place to share your knowledge."})]})})},_=function(){var e=Object(r.useState)(void 0),t=Object(j.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){return N.get("/tags").then((function(e){return e.data.tags})).then((function(e){return c(e)})),function(){return c([])}}),[]),Object(o.jsxs)("div",{className:"sidebar",children:[Object(o.jsx)("p",{children:"Popular Tags"}),Object(o.jsx)("div",{className:"tag-list",children:null===n||void 0===n?void 0:n.map((function(e){return Object(o.jsx)("a",{href:"index.html",className:"tag-pill tag-default",children:e},e)}))})]})},ee=function(e){var t=e.children,n=e.title;return Object(o.jsx)("div",{className:"auth-page",children:Object(o.jsx)("div",{className:"container page",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-md-6 offset-md-3 col-xs-12",children:[Object(o.jsx)("h1",{className:"text-xs-center",style:{margin:"4rem"},children:n}),t]})})})})},te=function(e){var t=e.onLoginSuccess;return Object(o.jsx)(ee,{title:"Sign in",children:Object(o.jsx)(re,{onLoginSuccess:t})})},ne="/login",re=function(e){var t=e.onLoginSuccess,n=x({email:"",password:""},(function(){(e=a.email,n=a.password,N.post("/users/login",{user:{email:e,password:n}}).then((function(e){return e.data.user}))).then((function(e){return t(e)})).catch((function(){return i(Error("Login Failed"))}));var e,n}),void 0),r=n.handleSubmit,c=n.handleChange,a=n.values,s=n.error,i=n.setError;return Object(o.jsxs)(y,{onSubmit:r,error:s,children:[Object(o.jsx)(L,{type:"text",name:"email",placeholder:"Email",value:a.email,onChange:c}),Object(o.jsx)(L,{type:"password",name:"password",placeholder:"Password",value:a.password,onChange:c}),Object(o.jsx)(I,{name:"submit-button",children:"Sign in"})]})},ce=function(e){var t=e.onSignUpSuccess;return Object(o.jsx)(ee,{title:"Sign Up",children:Object(o.jsx)(se,{onSignUpSuccess:t})})},ae="/register",se=function(e){var t=e.onSignUpSuccess,n=x({email:"",username:"",password:""},(function(){(function(e){var t=e.email,n=e.username,r=e.password;return N.post("/users",{user:{email:t,username:n,password:r}}).then((function(e){return e.data.user}))})(a).then(t).catch((function(){return i(Error("Register Failed"))}))}),void 0),r=n.handleSubmit,c=n.handleChange,a=n.values,s=n.error,i=n.setError;return Object(o.jsxs)(y,{onSubmit:r,error:s,children:[Object(o.jsx)(L,{type:"text",name:"email",placeholder:"Email",value:a.email,onChange:c}),Object(o.jsx)(L,{type:"text",name:"username",placeholder:"Your Name",value:a.username,onChange:c}),Object(o.jsx)(L,{type:"password",name:"password",placeholder:"Password",value:a.password,onChange:c}),Object(o.jsx)(I,{name:"submit-button",children:"Register"})]})},ie=function(){var e=Object(r.useState)((function(){return v()})),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(u.f)();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(oe,{isUserLoggedIn:null!==n}),Object(o.jsx)(le,{userLoggedIn:n,onLoginSuccess:function(e){c(e),function(e){window.localStorage.setItem(g,JSON.stringify(e))}(e),a.push("/")}})]})},oe=function(e){var t=e.isUserLoggedIn;return Object(o.jsx)("nav",{className:"navbar navbar-light",children:Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)(i.b,{className:"navbar-brand",to:"/",children:"conduit"}),Object(o.jsxs)("ul",{className:"nav navbar-nav pull-xs-right",children:[Object(o.jsx)(R,{to:"/",children:"Home"}),t?Object(o.jsx)(de,{}):Object(o.jsx)(be,{})]})]})})},le=function(e){var t=e.userLoggedIn,n=e.onLoginSuccess;return Object(o.jsxs)(u.c,{children:[Object(o.jsx)(u.a,{exact:!0,path:"/",children:Object(o.jsx)(X,{userLoggedIn:t})}),null!==t?Object(o.jsx)(je,{user:t}):Object(o.jsx)(ue,{onLoginSuccess:n})]})},je=function(e){var t=e.user;return Object(o.jsxs)(u.c,{children:[Object(o.jsx)(u.a,{path:P,children:Object(o.jsx)(U,{})}),Object(o.jsx)(u.a,{path:q,children:Object(o.jsx)(z,{user:t})}),Object(o.jsx)(u.a,{path:Q,children:Object(o.jsx)(K,{user:t})})]})},ue=function(e){var t=e.onLoginSuccess;return Object(o.jsxs)(u.c,{children:[Object(o.jsx)(u.a,{path:ne,children:Object(o.jsx)(te,{onLoginSuccess:t})}),Object(o.jsx)(u.a,{path:ae,children:Object(o.jsx)(ce,{onSignUpSuccess:t})})]})},de=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(R,{to:P,children:"New Post"}),Object(o.jsx)(R,{to:q,children:"Profile"}),Object(o.jsx)(R,{to:Q,children:"Settings"})]})},be=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(R,{to:ne,children:"Sign in"}),Object(o.jsx)(R,{to:ae,children:"Sign up"})]})};var he=function(){return Object(o.jsxs)(i.a,{children:[Object(o.jsx)(ie,{}),Object(o.jsx)(l,{})]})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(he,{})}),document.getElementById("root")),me()}},[[64,1,2]]]);
//# sourceMappingURL=main.574109a8.chunk.js.map